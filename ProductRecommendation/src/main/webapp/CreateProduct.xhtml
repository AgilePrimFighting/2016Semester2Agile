<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui">

<h:head>
<link rel="stylesheet" type="text/css" href="css/headlibs.main.css">
</link>
<style>
.error {color:red}
</style>
</h:head>
<h:body>
	<h1>Add a new Product.</h1>
	
	<h:form>
		#{createProductBean.initBean()}
		<p:panel style="margin: 0 auto;width: 90%;">
			<p:messages autoUpdate="true" />
		<h2>Product name </h2>
	
		<p:inputText value="#{createProductBean.productName}"
			style="display:block; width:80%"
			label="Question Body" maxlength="100" />
		<br />
		
		<h3>Product Active </h3>
		<p:selectBooleanButton id="productActive" value="#{createProductBean.productActive}" onLabel="Yes" offLabel="No" style="width:60px" />
		<br />
		
		<h3>Trial Available?</h3>
		<p:selectBooleanButton id="productTrail" value="#{createProductBean.productTrial}" onLabel="Yes" offLabel="No" style="width:60px" />
		<br />
		
		<h3>Product URL</h3>
		<p:inputText id = "URLinput" value="#{createProductBean.productURL}"
			style="display:block; width:80%"   maxlength="200">
		</p:inputText>
			<h:message for="URLinput" styleClass = "error"></h:message>
			
		<br />
		<h:form enctype="multipart/form-data">
			<p:dataTable id="pdfTable" value="#{createProductBean.pdfList}"  var = "pdf">
				<p:column headerText="Filename">
					<h:outputText value="#{pdf.PDF_Name}"></h:outputText>
				</p:column>

				<p:column headerText="Remove">
					<p:commandButton icon="ui-icon-close"
						actionListener="#{createProductBean.removePDF(pdf)}"
						update="pdfTable" immediate="true">
					</p:commandButton>
				</p:column>
			</p:dataTable>
			
			<p:fileUpload
					fileUploadListener="#{createProductBean.handleFileUpload}"
					mode="advanced" dragDropSupport="false" multiple="true"
					update="pdfTable" sizeLimit="4194304" fileLimit="5"
					allowTypes="/(\.|\/)(pdf)$/" auto="true" label="Upload a pdf"
					uploadLabel="Select a file to upload" />
				<p:growl id="messages" showDetail="true" />

			</h:form>
			<p:commandButton value="save" action="#{createProductBean.onSave}"
			style="margin-top:15px;" />
		<p:button value="cancel" outcome="ViewProducts"
			style="margin-left:20px;" />
		
		</p:panel>
	</h:form>

</h:body>
</html>